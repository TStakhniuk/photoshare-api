● Інструкція з локального розгортання PhotoShare API

  1. Попередні вимоги

  # Python 3.10+
  python3 --version

  # Poetry (менеджер залежностей)
  curl -sSL https://install.python-poetry.org | python3 -

  # Docker + Docker Compose (для БД та Redis)
  docker --version
  docker-compose --version

  2. Клонування репозиторію

  git clone https://github.com/TStakhniuk/photoshare-api.git
  cd photoshare-api

  # Переключитись на develop
  git fetch origin
  git checkout -b develop origin/develop

  3. Встановлення залежностей

  poetry install

  4. Налаштування .env

  cp .env.example .env

  Заповнити .env:
  # Database
  POSTGRES_USER=postgres
  POSTGRES_PASSWORD=postgres
  POSTGRES_DB=photoshare
  POSTGRES_HOST=localhost
  POSTGRES_PORT=5432
  DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/photoshare

  # JWT
  SECRET_KEY=your-secret-key-here
  ALGORITHM=HS256

  # Redis
  REDIS_HOST=localhost
  REDIS_PORT=6379
  REDIS_URL=redis://localhost:6379/0

  # Cloudinary (отримати на https://cloudinary.com)
  CLOUDINARY_CLOUD_NAME=your-cloud-name
  CLOUDINARY_API_KEY=your-api-key
  CLOUDINARY_API_SECRET=your-api-secret

  5. Запуск через Docker (рекомендовано)

  # Запустити всі сервіси
  docker-compose up --build -d

  # Перевірити статус
  docker-compose ps

  # Накатити міграції
  docker-compose exec app alembic upgrade head

  API доступний: http://localhost:8000/docs

  6. Альтернатива: Локальний запуск

  Крок 1: Запустити PostgreSQL та Redis окремо:
  # Тільки БД та Redis через Docker
  docker-compose up -d db redis

  Крок 2: Змінити POSTGRES_HOST в .env:
  POSTGRES_HOST=localhost

  Крок 3: Накатити міграції:
  poetry run alembic upgrade head

  Крок 4: Запустити сервер:
  poetry run uvicorn src.main:app --reload --host 0.0.0.0 --port 8000

  7. Перевірка

  # Swagger документація
  curl http://localhost:8000/docs

  # API root
  curl http://localhost:8000/

  8. Корисні команди

  # Переглянути логи
  docker-compose logs -f app

  # Зупинити всі контейнери
  docker-compose down

  # Перезапустити
  docker-compose restart

  # Видалити все (включно з БД)
  docker-compose down -v

  Можливі проблеми

  | Проблема           | Рішення                                        |
  |--------------------|------------------------------------------------|
  | Port 5432 зайнятий | Зупинити локальний PostgreSQL або змінити порт |
  | Poetry not found   | Додати ~/.local/bin в PATH                     |
  | Alembic помилки    | Перевірити DATABASE_URL в .env                 |
  | Cloudinary помилки | Перевірити ключі API                           |